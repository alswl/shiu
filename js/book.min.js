(function(){var a={init:function(d){var b=this;b.title=d.title;b.author=d.author;b.chapters=[];for(var e=0;e<d.chapters.length;e++){var c=new Chapter().init(d.chapters[e].title,d.chapters[e].content,e);b.chapters.push(c)}return b},setCurrentPage:function(b){db.set(self.title+"_currentPage",b)},getCurrentPage:function(){var b=db.get(self.title+"_currentPage");if(b===null){b=0}return b},setPageCount:function(b){db.set(self.title+"_pageCount",b)},getPageCount:function(){return db.get(self.title+"_pageCount")},setCurrentChapterIndex:function(b){db.set(self.title+"_currentChapterIndex",b)},getCurrentChapterIndex:function(){index=db.get(self.title+"_currentChapterIndex");if(index===null){index=0}return index},getCurrentChapter:function(){return this.chapters[this.getCurrentChapterIndex()]},getIndexsHtml:function(){var b=this;var d="";for(var c=0;c<b.chapters.length;c++){d+='<li><a href="javascript:;" rel="'+c+'">'+b.chapters[c].getCnIndex()+b.chapters[c].title+"</a></li>"}return d},};window.Book=a})();