(function(){var a={init:function(d){var b=this,e=0,c;b.db=window.shiu.db.Db;b.title=d.title;b.author=d.author;b.chapters=[];for(e=0;e<d.chapters.length;e+=1){c=Object.create(window.shiu.model.Chapter).init(d.chapters[e].title,d.chapters[e].content,e);b.chapters.push(c)}return b},setCurrentPage:function(c){var b=this;b.db.set(b.title+"_currentPage",c)},getCurrentPage:function(){var b=this,c=b.db.get(b.title+"_currentPage");if(c===null||c>b.getPageCount()){c=0}return c},setFontSize:function(c){var b=this;b.db.set(b.title+"_font_size",c)},getFontSize:function(){var b=this,c=b.db.get(b.title+"_font_size");if(c===null){c=16}return c},setPageCount:function(c){var b=this;b.db.set(b.title+"_pageCount",c)},getPageCount:function(){var b=this;return b.db.get(b.title+"_pageCount")},setCurrentChapterIndex:function(c){var b=this;this.db.set(b.title+"_currentChapterIndex",c)},getCurrentChapterIndex:function(){var b=this,c=b.db.get(b.title+"_currentChapterIndex");if(c===null||c>b.chapters.length){c=0}return c},getCurrentChapter:function(){var b=this;return b.chapters[b.getCurrentChapterIndex()]},getIndexsHtml:function(){var b=this,d="",c;for(c=0;c<b.chapters.length;c+=1){d+='<li><a href="javascript:;" rel="'+c+'">'+b.chapters[c].getCnIndex()+" "+b.chapters[c].title+"</a></li>"}return d}};window.shiu.model.Book=a}());